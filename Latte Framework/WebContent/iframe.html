<!DOCTYPE html>
<html>
<head>
<title>Latte Framework iframe</title>
</head>
<script type="text/javascript">

		window.onmessage = function(e) {
		    
		    var payload = JSON.parse(e.data);
		    switch(payload.method) {
		        case 'set':
		            localStorage.setItem(payload.key, JSON.stringify(payload.data));
		            break;
		        case 'get':
		            var parent = window.parent;
		            var data = localStorage.getItem(payload.key);
		            parent.postMessage(JSON.stringify({ 'method':"get", 'key':payload.key, 'data':data }), "*");
		            break;
		        case 'all':
		            var parent = window.parent;
		            var data = {};
		            for(var i in localStorage) {
		                data[i] = localStorage[i];
		            }
		            parent.postMessage(JSON.stringify({ 'method':"all", 'data':data }), "*");
		            break;
		        case 'remove':
		            localStorage.removeItem(payload.key);
		            break;
		    }
		};
	</script>
<body>
	<p>Latte Framework iframe</p>
</body>
</html>